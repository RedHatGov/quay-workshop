b 1 - Organizations

## Create Quay Secrets

You will need to create the quay secrets, before we get started.

Run ```install-script``` to create Openshift secrets.

```execute
./install-script
```

Please give your email address, desired username, and password.

This workshop is using a project called homeroom to bundle all web services into a single dashboard. This makes for a simple unified experience when following this lab guide. By default, Quay does not support running from within an iFrame. iFrames are the specific mechanism used by this homeroom project to display the various web services in a tabulated pane. To allow iFrames, we'll need to patch the Quay deployment with the following command:
```execute
oc patch deployments/quayecosystem-quay -n quay -p '{"spec":{"template":{"spec":{"containers":[{"name":"quay-enterprise-app","image":"quay.io/redhatgov/quay-3.3-xframe-allow:latest"}]}}}}'
```


## Login to Quay
Please allow up to 5 minutes for all instances of quay to come up. When complete, it should look like the image below. Notice how all pods are showing a dark blue ring to indicate they are reporting a healthy and ready state.
![Openshift Console](images/Quay_topology.png)

You may have noticed the Quay tab available on the right side of the dashboard. Because it was loaded prior to your deployment of a Quay instance, it's displaying an error message. To remedy this (Once all pods are up), please refresh your browser window.

![Openshift Console](images/Quay_pod.png)


_______________________________________________________________________________________________________________

Once logged in, you'll be presented with the Quay dashboard. Notice a few things here true of a new user:
![Quay Dashboard](images/lab1-1.png)

* Quay presents 3 Links at the top of the page (EXPLORE, REPOSITORIES, and TUTORIAL). The `TUTORIAL` link walks you through the full cycle of pushing an image into your Quay instance. This is great any time you need a quick refresher.
* You have no `Organizations` created. However, you can create repositories under your username, which acts somewhat like an Organization.
* The UI is prompting you to `Create New Organization` on the right.

*Note: Organization names must be globally unique to your Quay instance. For example, if you attempt to create an organization named `user1`, Quay will prevent you from creating this Org, because by default, each user starts with an org created in their account using their username. Repositories, however, are only required to be unique within a given organizations namespace. As an example the following two repos can co-exist without collision:*

```
myquay.com/user1/repo1

myquay.com/user2/repo1
```

## Create an Organization
Let's start by creating an Organization.
* Click - `Create New Organization`

![Quay Dashboard](images/lab1-1.png)

* Name this Organization `userXorg`, where `X` is your assigned user number.


* Click `Create Organization`

![Quay Dashboard](images/lab1-3.png)



## Create a Repository
![Quay Dashboard](images/lab1-3.png)

* Click `Create New Repository` in the top right of the UI.

* Ensure `userXorg` is selected in the drop down list of Organizations.

* Name the organization `test`.

* Change the `Repository Visibility` to `Public`.

* Optionally, set a repository description by clicking in and changing the default text that states `Click to set repository description`

* Click `Create Public Repository`

![Quay Dashboard](images/lab1-4.png)

* Navigate back to the dashboard by clicking the `RED HAT QUAY` icon in the top left of the page.
* Notice you now have two organizations, `userX` and `userXorg`. Your `userXorg` organization contains one repository named `test`.



## Next Lab:
[Previous](https://github.com/mbach04/quay_workshop_instructions/blob/master/README.md) | [Next](https://github.com/mbach04/quay_workshop_instructions/blob/master/lab2.md)


